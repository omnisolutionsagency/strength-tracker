<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0a0a0a">
  <title>Omni Fitness Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    html, body, #root { min-height: 100vh; }
    body { font-family: 'Inter', sans-serif; background: #0a0a0a; overscroll-behavior: none; }
    input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script>
const { useState, useEffect } = React;

const workoutProgram = {
  overview: [
    { week: 1, focus: "Hypertrophy & Volume", repRange: "8‚Äì12 reps", rpe: "7‚Äì8" },
    { week: 2, focus: "Hypertrophy & Volume", repRange: "8‚Äì12 reps", rpe: "7‚Äì8" },
    { week: 3, focus: "Hypertrophy & Volume", repRange: "8‚Äì12 reps", rpe: "7‚Äì8" },
    { week: 4, focus: "Hypertrophy & Volume", repRange: "8‚Äì12 reps", rpe: "7‚Äì8" },
    { week: 5, focus: "Strength Intensification", repRange: "4‚Äì6 reps", rpe: "8‚Äì9" },
    { week: 6, focus: "Strength Intensification", repRange: "4‚Äì6 reps", rpe: "8‚Äì9" },
    { week: 7, focus: "Strength Intensification", repRange: "4‚Äì6 reps", rpe: "8‚Äì9" },
    { week: 8, focus: "Strength Intensification", repRange: "4‚Äì6 reps", rpe: "8‚Äì9" },
  ],
  workouts: {
    1: {
      name: "Upper Strength",
      exercises: [
        { name: "Barbell Bench Press", sets: 4 },
        { name: "Weighted Pull-Ups or Lat Pulldown", sets: 4 },
        { name: "Barbell Overhead Press", sets: 3 },
        { name: "Chest-Supported Dumbbell Row", sets: 3 },
        { name: "Triceps Rope Pushdowns", sets: 2 },
        { name: "Dumbbell Curls (LLP if possible)", sets: 2 },
      ]
    },
    2: {
      name: "Lower Strength",
      exercises: [
        { name: "Barbell Back Squat", sets: 4 },
        { name: "Romanian Deadlift (LLP focus)", sets: 3 },
        { name: "Walking Lunges", sets: 3 },
        { name: "Seated Leg Curl", sets: 3 },
        { name: "Standing Calf Raises", sets: 3 },
      ]
    },
    3: {
      name: "Push Hypertrophy",
      exercises: [
        { name: "Incline Dumbbell Press", sets: 3 },
        { name: "Machine Chest Press or Cable Press", sets: 3 },
        { name: "Dumbbell Lateral Raise", sets: 3 },
        { name: "Overhead Dumbbell Triceps Extension", sets: 3 },
        { name: "Plank or Ab Wheel", sets: 3 },
      ]
    },
    4: {
      name: "Pull Hypertrophy",
      exercises: [
        { name: "Barbell or Dumbbell Row", sets: 3 },
        { name: "Cable Row or T-Bar Row", sets: 3 },
        { name: "Face Pulls or Rear Delt Machine", sets: 3 },
        { name: "Incline Dumbbell Curls", sets: 3 },
        { name: "Hammer Curls", sets: 2 },
        { name: "Cable Crunch or Hanging Leg Raises", sets: 3 },
      ]
    }
  }
};

const runningProgram = {
  1: { runs: [{ day: 1, distance: 1, intensity: "Moderate Pace" }, { day: 2, distance: 1, intensity: "Moderate Pace" }, { day: 3, distance: 2, intensity: "Steady State Endurance" }] },
  2: { runs: [{ day: 1, distance: 1.5, intensity: "Moderate Pace" }, { day: 2, distance: 1.5, intensity: "Moderate Pace" }, { day: 3, distance: 3, intensity: "Steady State Endurance" }] },
  3: { runs: [{ day: 1, distance: 2, intensity: "Moderate Pace" }, { day: 2, distance: 2, intensity: "Moderate Pace" }, { day: 3, distance: 4, intensity: "Steady State Endurance" }] },
  4: { runs: [{ day: 1, distance: 2.5, intensity: "Moderate Pace" }, { day: 2, distance: 2.5, intensity: "Moderate Pace" }, { day: 3, distance: 5, intensity: "Steady State Endurance" }] },
  5: { runs: [{ day: 1, distance: 3, intensity: "Moderate Pace" }, { day: 2, distance: 3, intensity: "Moderate Pace" }, { day: 3, distance: 6, intensity: "Steady State Endurance" }] },
  6: { runs: [{ day: 1, distance: 3.5, intensity: "Moderate Pace" }, { day: 2, distance: 3.5, intensity: "Moderate Pace" }, { day: 3, distance: 7, intensity: "Steady State Endurance" }] },
  7: { runs: [{ day: 1, distance: 4, intensity: "Moderate Pace" }, { day: 2, distance: 4, intensity: "Moderate Pace" }, { day: 3, distance: 8, intensity: "Steady State Endurance" }] },
  8: { runs: [{ day: 1, distance: 4.5, intensity: "Moderate Pace" }, { day: 2, distance: 4.5, intensity: "Moderate Pace" }, { day: 3, distance: 9, intensity: "Steady State Endurance" }] },
};

const getRepRange = (week) => week <= 4 ? "8‚Äì12" : "4‚Äì6";
const getRPE = (week) => week <= 4 ? "7‚Äì8" : "8‚Äì9";

const GitHubAPI = {
  async getFile(token, owner, repo, path) {
    const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
      headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
    });
    if (response.status === 404) return null;
    if (!response.ok) throw new Error('Failed to fetch file');
    const data = await response.json();
    return { content: JSON.parse(atob(data.content)), sha: data.sha };
  },
  async saveFile(token, owner, repo, path, content, sha) {
    const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
      method: 'PUT',
      headers: { 'Authorization': `token ${token}`, 'Content-Type': 'application/json', 'Accept': 'application/vnd.github.v3+json' },
      body: JSON.stringify({ message: `Update workout data - ${new Date().toLocaleDateString()}`, content: btoa(JSON.stringify(content, null, 2)), sha: sha || undefined })
    });
    if (!response.ok) { const err = await response.json(); throw new Error(err.message || 'Failed to save'); }
    return (await response.json()).content.sha;
  }
};

function FitnessTracker() {
  const [mode, setMode] = useState('strength'); // 'strength' or 'running'
  const [currentView, setCurrentView] = useState('home');
  const [selectedWeek, setSelectedWeek] = useState(1);
  const [selectedDay, setSelectedDay] = useState(1);
  const [workoutLog, setWorkoutLog] = useState({});
  const [runningLog, setRunningLog] = useState({});
  const [activeExercise, setActiveExercise] = useState(null);
  const [isLoading, setIsLoading] = useState(true);
  const [isSyncing, setIsSyncing] = useState(false);
  const [syncStatus, setSyncStatus] = useState('');
  const [fileSha, setFileSha] = useState(null);
  const [showSettings, setShowSettings] = useState(false);
  const [githubToken, setGithubToken] = useState('');
  const [githubOwner, setGithubOwner] = useState('');
  const [githubRepo, setGithubRepo] = useState('');
  const [isConfigured, setIsConfigured] = useState(false);
  const [saveTimeout, setSaveTimeout] = useState(null);

  useEffect(() => {
    const token = localStorage.getItem('s3n_github_token');
    const owner = localStorage.getItem('s3n_github_owner');
    const repo = localStorage.getItem('s3n_github_repo');
    if (token && owner && repo) {
      setGithubToken(token); setGithubOwner(owner); setGithubRepo(repo); setIsConfigured(true);
    } else { setShowSettings(true); setIsLoading(false); }
  }, []);

  useEffect(() => {
    if (isConfigured && githubToken && githubOwner && githubRepo) loadFromGitHub();
  }, [isConfigured, githubToken, githubOwner, githubRepo]);

  const loadFromGitHub = async () => {
    setIsLoading(true); setSyncStatus('Loading...');
    try {
      const result = await GitHubAPI.getFile(githubToken, githubOwner, githubRepo, 'workout-data.json');
      if (result) {
        setWorkoutLog(result.content.workoutLog || {});
        setRunningLog(result.content.runningLog || {});
        setFileSha(result.sha);
        setSyncStatus('Synced ‚úì');
      } else { setWorkoutLog({}); setRunningLog({}); setSyncStatus('Ready (new)'); }
    } catch (error) {
      console.error('Load error:', error); setSyncStatus('Error loading');
      const backup = localStorage.getItem('s3n_workout_backup');
      if (backup) { const data = JSON.parse(backup); setWorkoutLog(data.workoutLog || {}); setRunningLog(data.runningLog || {}); }
    }
    setIsLoading(false);
  };

  const saveToGitHub = async (newWorkoutLog, newRunningLog) => {
    if (!isConfigured) return;
    const data = { workoutLog: newWorkoutLog, runningLog: newRunningLog };
    localStorage.setItem('s3n_workout_backup', JSON.stringify(data));
    setIsSyncing(true); setSyncStatus('Saving...');
    try {
      const content = { ...data, lastUpdated: new Date().toISOString() };
      const newSha = await GitHubAPI.saveFile(githubToken, githubOwner, githubRepo, 'workout-data.json', content, fileSha);
      setFileSha(newSha); setSyncStatus('Saved ‚úì');
    } catch (error) {
      console.error('Save error:', error); setSyncStatus('Save failed');
      if (error.message.includes('SHA')) {
        try {
          const result = await GitHubAPI.getFile(githubToken, githubOwner, githubRepo, 'workout-data.json');
          if (result) {
            const content = { ...data, lastUpdated: new Date().toISOString() };
            const newSha = await GitHubAPI.saveFile(githubToken, githubOwner, githubRepo, 'workout-data.json', content, result.sha);
            setFileSha(newSha); setSyncStatus('Saved ‚úì');
          }
        } catch (e) { setSyncStatus('Sync error'); }
      }
    }
    setIsSyncing(false);
  };

  const queueSave = (wLog, rLog) => {
    if (saveTimeout) clearTimeout(saveTimeout);
    setSaveTimeout(setTimeout(() => saveToGitHub(wLog, rLog), 2000));
  };

  const saveConfig = () => {
    if (!githubToken || !githubOwner || !githubRepo) { alert('Please fill in all fields'); return; }
    localStorage.setItem('s3n_github_token', githubToken);
    localStorage.setItem('s3n_github_owner', githubOwner);
    localStorage.setItem('s3n_github_repo', githubRepo);
    setIsConfigured(true); setShowSettings(false);
  };

  const getLogKey = (week, day, exerciseIndex, setIndex) => `w${week}d${day}e${exerciseIndex}s${setIndex}`;
  const getRunKey = (week, runDay) => `w${week}r${runDay}`;

  const getSetData = (exerciseIndex, setIndex) => {
    const key = getLogKey(selectedWeek, selectedDay, exerciseIndex, setIndex);
    return workoutLog[key] || { weight: '', reps: '', completed: false };
  };

  const handleInputChange = (exerciseIndex, setIndex, field, value) => {
    const key = getLogKey(selectedWeek, selectedDay, exerciseIndex, setIndex);
    const newLog = { ...workoutLog, [key]: { ...workoutLog[key], [field]: value } };
    setWorkoutLog(newLog); queueSave(newLog, runningLog);
  };

  const toggleSetComplete = (exerciseIndex, setIndex) => {
    const key = getLogKey(selectedWeek, selectedDay, exerciseIndex, setIndex);
    const current = workoutLog[key] || {};
    const newLog = { ...workoutLog, [key]: { ...current, completed: !current.completed } };
    setWorkoutLog(newLog); queueSave(newLog, runningLog);
  };

  const getRunData = (week, runDay) => runningLog[getRunKey(week, runDay)] || { time: '', completed: false };

  const handleRunInput = (week, runDay, field, value) => {
    const key = getRunKey(week, runDay);
    const newLog = { ...runningLog, [key]: { ...runningLog[key], [field]: value } };
    setRunningLog(newLog); queueSave(workoutLog, newLog);
  };

  const toggleRunComplete = (week, runDay) => {
    const key = getRunKey(week, runDay);
    const current = runningLog[key] || {};
    const newLog = { ...runningLog, [key]: { ...current, completed: !current.completed } };
    setRunningLog(newLog); queueSave(workoutLog, newLog);
  };

  const getWorkoutProgress = (week, day) => {
    const workout = workoutProgram.workouts[day];
    let completed = 0, total = 0;
    workout.exercises.forEach((ex, eIdx) => {
      for (let s = 0; s < ex.sets; s++) {
        total++;
        if (workoutLog[getLogKey(week, day, eIdx, s)]?.completed) completed++;
      }
    });
    return { completed, total, percent: total > 0 ? Math.round((completed / total) * 100) : 0 };
  };

  const getWeekProgress = (week) => {
    let completed = 0, total = 0;
    for (let day = 1; day <= 4; day++) {
      const prog = getWorkoutProgress(week, day);
      completed += prog.completed; total += prog.total;
    }
    return { completed, total, percent: total > 0 ? Math.round((completed / total) * 100) : 0 };
  };

  const getRunningWeekProgress = (week) => {
    const runs = runningProgram[week].runs;
    let completed = 0;
    runs.forEach((run, idx) => { if (runningLog[getRunKey(week, idx + 1)]?.completed) completed++; });
    return { completed, total: 3, percent: Math.round((completed / 3) * 100) };
  };

  const getTotalMiles = () => {
    let miles = 0;
    for (let w = 1; w <= 8; w++) {
      runningProgram[w].runs.forEach((run, idx) => {
        if (runningLog[getRunKey(w, idx + 1)]?.completed) miles += run.distance;
      });
    }
    return miles;
  };

  const resetWorkout = () => {
    if (!confirm('Reset this workout?')) return;
    const workout = workoutProgram.workouts[selectedDay];
    const newLog = { ...workoutLog };
    workout.exercises.forEach((ex, eIdx) => {
      for (let s = 0; s < ex.sets; s++) delete newLog[getLogKey(selectedWeek, selectedDay, eIdx, s)];
    });
    setWorkoutLog(newLog); saveToGitHub(newLog, runningLog);
  };

  const resetAll = () => {
    if (confirm('Reset ALL data? This cannot be undone.')) {
      setWorkoutLog({}); setRunningLog({});
      saveToGitHub({}, {});
    }
  };

  // SETTINGS VIEW
  if (showSettings) {
    return React.createElement('div', { style: styles.container },
      React.createElement('header', { style: styles.header },
        React.createElement('h1', { style: styles.logo }, 'S3N'),
        React.createElement('p', { style: styles.subtitle }, 'GitHub Setup')
      ),
      React.createElement('div', { style: styles.settingsCard },
        React.createElement('h2', { style: styles.settingsTitle }, 'Connect to GitHub'),
        React.createElement('p', { style: styles.settingsDesc }, 'Your workout data will sync to a JSON file in your GitHub repository.'),
        React.createElement('div', { style: styles.inputGroup },
          React.createElement('label', { style: styles.inputLabel }, 'GitHub Username'),
          React.createElement('input', { type: 'text', placeholder: 'your-username', value: githubOwner, onChange: (e) => setGithubOwner(e.target.value), style: styles.textInput })
        ),
        React.createElement('div', { style: styles.inputGroup },
          React.createElement('label', { style: styles.inputLabel }, 'Repository Name'),
          React.createElement('input', { type: 'text', placeholder: 'fitness-tracker', value: githubRepo, onChange: (e) => setGithubRepo(e.target.value), style: styles.textInput })
        ),
        React.createElement('div', { style: styles.inputGroup },
          React.createElement('label', { style: styles.inputLabel }, 'Personal Access Token'),
          React.createElement('input', { type: 'password', placeholder: 'ghp_xxxxxxxxxxxx', value: githubToken, onChange: (e) => setGithubToken(e.target.value), style: styles.textInput }),
          React.createElement('p', { style: styles.inputHint }, 'GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic). Enable "repo" scope.')
        ),
        React.createElement('button', { style: styles.saveConfigBtn, onClick: saveConfig }, 'Connect & Start'),
        isConfigured && React.createElement('button', { style: styles.cancelBtn, onClick: () => setShowSettings(false) }, 'Cancel')
      )
    );
  }

  if (isLoading) {
    return React.createElement('div', { style: styles.loadingContainer },
      React.createElement('div', { style: styles.loadingSpinner }),
      React.createElement('p', { style: styles.loadingText }, 'Syncing with GitHub...')
    );
  }

  const SyncBar = () => React.createElement('div', { style: styles.syncBar },
    React.createElement('span', { style: { ...styles.syncStatus, ...(isSyncing ? styles.syncPulse : {}) } }, syncStatus),
    React.createElement('button', { style: styles.settingsBtn, onClick: () => setShowSettings(true) }, '‚öô')
  );

  const ModeToggle = () => React.createElement('div', { style: styles.modeToggle },
    React.createElement('button', { 
      style: { ...styles.modeBtn, ...(mode === 'strength' ? styles.modeBtnActive : {}) },
      onClick: () => { setMode('strength'); setCurrentView('home'); }
    }, 'üèãÔ∏è Strength'),
    React.createElement('button', { 
      style: { ...styles.modeBtn, ...(mode === 'running' ? styles.modeBtnActiveRun : {}) },
      onClick: () => { setMode('running'); setCurrentView('home'); }
    }, 'üèÉ Running')
  );

  // RUNNING HOME
  if (mode === 'running' && currentView === 'home') {
    return React.createElement('div', { style: styles.container },
      React.createElement(SyncBar),
      React.createElement(ModeToggle),
      React.createElement('header', { style: styles.header },
        React.createElement('h1', { style: styles.logoRun }, 'S3N'),
        React.createElement('p', { style: styles.subtitle }, '8-Week Running Program')
      ),
      React.createElement('div', { style: styles.runOverview },
        React.createElement('div', { style: styles.runOverviewItem },
          React.createElement('span', { style: styles.runOverviewLabel }, 'Weekly Structure'),
          React.createElement('span', { style: styles.runOverviewValue }, '2√ó Moderate + 1√ó Long Run')
        ),
        React.createElement('div', { style: styles.runOverviewItem },
          React.createElement('span', { style: styles.runOverviewLabel }, 'Distance Range'),
          React.createElement('span', { style: styles.runOverviewValue }, '1 ‚Üí 9 miles')
        )
      ),
      React.createElement('div', { style: styles.weekGrid },
        [1,2,3,4,5,6,7,8].map(week => {
          const prog = getRunningWeekProgress(week);
          const weekRuns = runningProgram[week].runs;
          const totalDist = weekRuns.reduce((sum, r) => sum + r.distance, 0);
          return React.createElement('button', {
            key: week,
            style: { ...styles.weekCard, ...styles.weekCardRun, ...(prog.percent === 100 ? styles.weekCardComplete : {}) },
            onClick: () => { setSelectedWeek(week); setCurrentView('runWeek'); }
          },
            React.createElement('span', { style: styles.weekNumber }, `Week ${week}`),
            React.createElement('span', { style: styles.weekMiles }, `${totalDist} mi`),
            React.createElement('div', { style: styles.weekProgressBar },
              React.createElement('div', { style: { ...styles.weekProgressFill, width: `${prog.percent}%`, background: prog.percent === 100 ? '#22c55e' : '#10b981' } })
            ),
            React.createElement('span', { style: styles.weekProgressText }, `${prog.completed}/3`)
          );
        })
      ),
      React.createElement('div', { style: styles.statsRow },
        React.createElement('div', { style: styles.statBox },
          React.createElement('span', { style: styles.statValueRun }, Object.values(runningLog).filter(v => v.completed).length),
          React.createElement('span', { style: styles.statLabel }, 'Runs Done')
        ),
        React.createElement('div', { style: styles.statBox },
          React.createElement('span', { style: styles.statValueRun }, getTotalMiles().toFixed(1)),
          React.createElement('span', { style: styles.statLabel }, 'Total Miles')
        )
      ),
      React.createElement('button', { style: styles.resetAllBtn, onClick: resetAll }, 'Reset All Data')
    );
  }

  // RUNNING WEEK VIEW
  if (mode === 'running' && currentView === 'runWeek') {
    const weekRuns = runningProgram[selectedWeek].runs;
    const prog = getRunningWeekProgress(selectedWeek);
    return React.createElement('div', { style: styles.container },
      React.createElement(SyncBar),
      React.createElement('button', { style: styles.backButton, onClick: () => setCurrentView('home') }, '‚Üê Back'),
      React.createElement('header', { style: styles.weekHeader },
        React.createElement('h1', { style: styles.weekTitle }, `Week ${selectedWeek}`),
        React.createElement('div', { style: styles.runBadge }, `${weekRuns.reduce((s,r) => s + r.distance, 0)} miles total`),
        React.createElement('div', { style: styles.workoutProgressBar },
          React.createElement('div', { style: { ...styles.workoutProgressFillRun, width: `${prog.percent}%` } })
        ),
        React.createElement('p', { style: styles.workoutProgressText }, `${prog.completed}/3 runs completed`)
      ),
      React.createElement('div', { style: styles.runList },
        weekRuns.map((run, idx) => {
          const runData = getRunData(selectedWeek, idx + 1);
          return React.createElement('div', { key: idx, style: { ...styles.runCard, ...(runData.completed ? styles.runCardComplete : {}) } },
            React.createElement('div', { style: styles.runHeader },
              React.createElement('div', null,
                React.createElement('span', { style: styles.runDay }, `Run ${idx + 1}`),
                React.createElement('span', { style: styles.runIntensity }, run.intensity)
              ),
              React.createElement('span', { style: styles.runDistance }, `${run.distance} mi`)
            ),
            React.createElement('div', { style: styles.runInputRow },
              React.createElement('div', { style: styles.runInputGroup },
                React.createElement('label', { style: styles.runInputLabel }, 'Time (min)'),
                React.createElement('input', {
                  type: 'number',
                  inputMode: 'numeric',
                  placeholder: '0',
                  value: runData.time || '',
                  onChange: (e) => handleRunInput(selectedWeek, idx + 1, 'time', e.target.value),
                  style: styles.runInput
                })
              ),
              React.createElement('button', {
                style: { ...styles.runCompleteBtn, ...(runData.completed ? styles.runCompleteBtnActive : {}) },
                onClick: () => toggleRunComplete(selectedWeek, idx + 1)
              }, runData.completed ? '‚úì Done' : 'Complete')
            ),
            runData.time && runData.completed && React.createElement('div', { style: styles.runPace },
              `Pace: ${(parseFloat(runData.time) / run.distance).toFixed(1)} min/mi`
            )
          );
        })
      )
    );
  }

  // STRENGTH HOME
  if (mode === 'strength' && currentView === 'home') {
    return React.createElement('div', { style: styles.container },
      React.createElement(SyncBar),
      React.createElement(ModeToggle),
      React.createElement('header', { style: styles.header },
        React.createElement('h1', { style: styles.logo }, 'S3N'),
        React.createElement('p', { style: styles.subtitle }, '8-Week Muscle & Strength')
      ),
      React.createElement('div', { style: styles.phaseCards },
        React.createElement('div', { style: {...styles.phaseCard, ...styles.phaseHypertrophy} },
          React.createElement('span', { style: styles.phaseWeeks }, 'Weeks 1‚Äì4'),
          React.createElement('span', { style: styles.phaseName }, 'HYPERTROPHY'),
          React.createElement('span', { style: styles.phaseReps }, '8‚Äì12 reps ‚Ä¢ RPE 7‚Äì8')
        ),
        React.createElement('div', { style: {...styles.phaseCard, ...styles.phaseStrength} },
          React.createElement('span', { style: styles.phaseWeeks }, 'Weeks 5‚Äì8'),
          React.createElement('span', { style: styles.phaseName }, 'STRENGTH'),
          React.createElement('span', { style: styles.phaseReps }, '4‚Äì6 reps ‚Ä¢ RPE 8‚Äì9')
        )
      ),
      React.createElement('div', { style: styles.weekGrid },
        [1,2,3,4,5,6,7,8].map(week => {
          const prog = getWeekProgress(week);
          const isStrength = week > 4;
          return React.createElement('button', {
            key: week,
            style: { ...styles.weekCard, ...(isStrength ? styles.weekCardStrength : styles.weekCardHypertrophy), ...(prog.percent === 100 ? styles.weekCardComplete : {}) },
            onClick: () => { setSelectedWeek(week); setCurrentView('week'); }
          },
            React.createElement('span', { style: styles.weekNumber }, `Week ${week}`),
            React.createElement('div', { style: styles.weekProgressBar },
              React.createElement('div', { style: { ...styles.weekProgressFill, width: `${prog.percent}%`, background: prog.percent === 100 ? '#22c55e' : (isStrength ? '#f97316' : '#3b82f6') } })
            ),
            React.createElement('span', { style: styles.weekProgressText }, `${prog.percent}%`)
          );
        })
      ),
      React.createElement('div', { style: styles.statsRow },
        React.createElement('div', { style: styles.statBox },
          React.createElement('span', { style: styles.statValue }, Object.values(workoutLog).filter(v => v.completed).length),
          React.createElement('span', { style: styles.statLabel }, 'Sets Done')
        ),
        React.createElement('div', { style: styles.statBox },
          React.createElement('span', { style: styles.statValue }, Object.values(workoutLog).reduce((sum, v) => sum + (parseFloat(v.weight) || 0) * (parseInt(v.reps) || 0), 0).toLocaleString()),
          React.createElement('span', { style: styles.statLabel }, 'Total Volume')
        )
      ),
      React.createElement('button', { style: styles.resetAllBtn, onClick: resetAll }, 'Reset All Data')
    );
  }

  // STRENGTH WEEK VIEW
  if (mode === 'strength' && currentView === 'week') {
    const weekInfo = workoutProgram.overview[selectedWeek - 1];
    return React.createElement('div', { style: styles.container },
      React.createElement(SyncBar),
      React.createElement('button', { style: styles.backButton, onClick: () => setCurrentView('home') }, '‚Üê Back'),
      React.createElement('header', { style: styles.weekHeader },
        React.createElement('h1', { style: styles.weekTitle }, `Week ${selectedWeek}`),
        React.createElement('div', { style: { ...styles.phaseBadge, background: selectedWeek <= 4 ? 'linear-gradient(135deg, #3b82f6, #1d4ed8)' : 'linear-gradient(135deg, #f97316, #ea580c)' } }, weekInfo.focus),
        React.createElement('p', { style: styles.weekMeta }, `${weekInfo.repRange} ‚Ä¢ RPE ${weekInfo.rpe}`)
      ),
      React.createElement('div', { style: styles.dayGrid },
        [1,2,3,4].map(day => {
          const workout = workoutProgram.workouts[day];
          const prog = getWorkoutProgress(selectedWeek, day);
          return React.createElement('button', {
            key: day,
            style: { ...styles.dayCard, ...(prog.percent === 100 ? styles.dayCardComplete : {}) },
            onClick: () => { setSelectedDay(day); setActiveExercise(null); setCurrentView('workout'); }
          },
            React.createElement('div', { style: styles.dayHeader },
              React.createElement('span', { style: styles.dayNumber }, `Day ${day}`),
              prog.percent === 100 && React.createElement('span', { style: styles.checkMark }, '‚úì')
            ),
            React.createElement('span', { style: styles.dayName }, workout.name),
            React.createElement('span', { style: styles.dayExercises }, `${workout.exercises.length} exercises`),
            React.createElement('div', { style: styles.dayProgressBar },
              React.createElement('div', { style: { ...styles.dayProgressFill, width: `${prog.percent}%` } })
            ),
            React.createElement('span', { style: styles.dayProgressText }, `${prog.completed}/${prog.total} sets`)
          );
        })
      )
    );
  }

  // STRENGTH WORKOUT VIEW
  if (mode === 'strength' && currentView === 'workout') {
    const workout = workoutProgram.workouts[selectedDay];
    const repRange = getRepRange(selectedWeek);
    const rpe = getRPE(selectedWeek);
    const prog = getWorkoutProgress(selectedWeek, selectedDay);

    return React.createElement('div', { style: styles.container },
      React.createElement(SyncBar),
      React.createElement('button', { style: styles.backButton, onClick: () => setCurrentView('week') }, `‚Üê Week ${selectedWeek}`),
      React.createElement('header', { style: styles.workoutHeader },
        React.createElement('div', { style: styles.workoutTitleRow },
          React.createElement('h1', { style: styles.workoutTitle }, workout.name),
          React.createElement('button', { style: styles.resetButton, onClick: resetWorkout }, 'Reset')
        ),
        React.createElement('p', { style: styles.workoutMeta }, `Week ${selectedWeek} ‚Ä¢ Day ${selectedDay} ‚Ä¢ ${repRange} reps ‚Ä¢ RPE ${rpe}`),
        React.createElement('div', { style: styles.workoutProgressBar },
          React.createElement('div', { style: { ...styles.workoutProgressFill, width: `${prog.percent}%` } })
        ),
        React.createElement('p', { style: styles.workoutProgressText }, `${prog.completed}/${prog.total} sets completed`)
      ),
      React.createElement('div', { style: styles.exerciseList },
        workout.exercises.map((exercise, eIdx) => 
          React.createElement('div', { key: eIdx, style: styles.exerciseCard },
            React.createElement('button', {
              style: styles.exerciseHeader,
              onClick: () => setActiveExercise(activeExercise === eIdx ? null : eIdx)
            },
              React.createElement('div', { style: styles.exerciseInfo },
                React.createElement('span', { style: styles.exerciseName }, exercise.name),
                React.createElement('span', { style: styles.exerciseSets }, `${exercise.sets} sets √ó ${repRange}`)
              ),
              React.createElement('span', { style: styles.exerciseToggle }, activeExercise === eIdx ? '‚ñº' : '‚ñ∂')
            ),
            activeExercise === eIdx && React.createElement('div', { style: styles.setsContainer },
              Array.from({ length: exercise.sets }, (_, sIdx) => {
                const setData = getSetData(eIdx, sIdx);
                return React.createElement('div', { key: sIdx, style: { ...styles.setRow, ...(setData.completed ? styles.setRowComplete : {}) } },
                  React.createElement('span', { style: styles.setNumber }, `Set ${sIdx + 1}`),
                  React.createElement('input', { type: 'number', inputMode: 'decimal', placeholder: 'lbs', value: setData.weight, onChange: (e) => handleInputChange(eIdx, sIdx, 'weight', e.target.value), style: styles.input }),
                  React.createElement('input', { type: 'number', inputMode: 'numeric', placeholder: 'reps', value: setData.reps, onChange: (e) => handleInputChange(eIdx, sIdx, 'reps', e.target.value), style: styles.input }),
                  React.createElement('button', { style: { ...styles.completeButton, ...(setData.completed ? styles.completeButtonActive : {}) }, onClick: () => toggleSetComplete(eIdx, sIdx) }, setData.completed ? '‚úì' : '‚óã')
                );
              })
            )
          )
        )
      )
    );
  }

  return null;
}

const styles = {
  container: { minHeight: '100vh', background: 'linear-gradient(180deg, #0a0a0a 0%, #171717 100%)', color: '#fff', fontFamily: "'Bebas Neue', Impact, sans-serif", padding: '16px', paddingBottom: '40px' },
  loadingContainer: { minHeight: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', background: '#0a0a0a', color: '#fff' },
  loadingSpinner: { width: '48px', height: '48px', border: '4px solid #333', borderTop: '4px solid #f97316', borderRadius: '50%', animation: 'spin 1s linear infinite' },
  loadingText: { marginTop: '16px', fontSize: '14px', color: '#888', fontFamily: "'Inter', sans-serif" },
  syncBar: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px', padding: '8px 12px', background: 'rgba(255,255,255,0.03)', borderRadius: '8px' },
  syncStatus: { fontSize: '12px', color: '#888', fontFamily: "'Inter', sans-serif" },
  syncPulse: { animation: 'pulse 1s infinite' },
  settingsBtn: { background: 'transparent', border: 'none', color: '#666', fontSize: '18px', cursor: 'pointer', padding: '4px 8px' },
  modeToggle: { display: 'flex', gap: '8px', marginBottom: '16px' },
  modeBtn: { flex: 1, padding: '12px', background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '10px', color: '#888', fontSize: '14px', fontFamily: "'Inter', sans-serif", cursor: 'pointer', fontWeight: '500' },
  modeBtnActive: { background: 'linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.1))', borderColor: 'rgba(249, 115, 22, 0.5)', color: '#f97316' },
  modeBtnActiveRun: { background: 'linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1))', borderColor: 'rgba(16, 185, 129, 0.5)', color: '#10b981' },
  header: { textAlign: 'center', marginBottom: '24px', paddingTop: '8px' },
  logo: { fontSize: '56px', fontWeight: '400', letterSpacing: '8px', margin: 0, background: 'linear-gradient(135deg, #f97316, #facc15)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' },
  logoRun: { fontSize: '56px', fontWeight: '400', letterSpacing: '8px', margin: 0, background: 'linear-gradient(135deg, #10b981, #34d399)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' },
  subtitle: { fontSize: '14px', color: '#666', letterSpacing: '4px', textTransform: 'uppercase', margin: '8px 0 0 0', fontFamily: "'Inter', sans-serif" },
  settingsCard: { background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.08)', borderRadius: '16px', padding: '24px' },
  settingsTitle: { fontSize: '20px', marginBottom: '8px', fontFamily: "'Inter', sans-serif", fontWeight: '600' },
  settingsDesc: { fontSize: '14px', color: '#888', marginBottom: '24px', fontFamily: "'Inter', sans-serif", lineHeight: '1.5' },
  inputGroup: { marginBottom: '20px' },
  inputLabel: { display: 'block', fontSize: '12px', color: '#888', marginBottom: '8px', fontFamily: "'Inter', sans-serif", textTransform: 'uppercase', letterSpacing: '1px' },
  textInput: { width: '100%', background: 'rgba(255,255,255,0.08)', border: '1px solid rgba(255,255,255,0.15)', borderRadius: '8px', padding: '14px 16px', color: '#fff', fontSize: '16px', fontFamily: "'Inter', sans-serif", outline: 'none' },
  inputHint: { fontSize: '11px', color: '#666', marginTop: '8px', fontFamily: "'Inter', sans-serif", lineHeight: '1.5' },
  saveConfigBtn: { width: '100%', padding: '16px', background: 'linear-gradient(135deg, #f97316, #ea580c)', border: 'none', borderRadius: '12px', color: '#fff', fontSize: '16px', fontWeight: '600', fontFamily: "'Inter', sans-serif", cursor: 'pointer', marginTop: '8px' },
  cancelBtn: { width: '100%', padding: '14px', background: 'transparent', border: '1px solid rgba(255,255,255,0.2)', borderRadius: '12px', color: '#888', fontSize: '14px', fontFamily: "'Inter', sans-serif", cursor: 'pointer', marginTop: '12px' },
  runOverview: { display: 'flex', gap: '12px', marginBottom: '24px' },
  runOverviewItem: { flex: 1, background: 'linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.08))', border: '1px solid rgba(16, 185, 129, 0.3)', borderRadius: '12px', padding: '16px', display: 'flex', flexDirection: 'column', gap: '4px' },
  runOverviewLabel: { fontSize: '11px', color: '#888', letterSpacing: '1px', fontFamily: "'Inter', sans-serif" },
  runOverviewValue: { fontSize: '14px', fontWeight: '600', color: '#10b981', fontFamily: "'Inter', sans-serif" },
  phaseCards: { display: 'flex', gap: '12px', marginBottom: '24px' },
  phaseCard: { flex: 1, padding: '16px', borderRadius: '12px', display: 'flex', flexDirection: 'column', gap: '4px' },
  phaseHypertrophy: { background: 'linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(29, 78, 216, 0.1))', border: '1px solid rgba(59, 130, 246, 0.3)' },
  phaseStrength: { background: 'linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.1))', border: '1px solid rgba(249, 115, 22, 0.3)' },
  phaseWeeks: { fontSize: '11px', color: '#888', letterSpacing: '1px', fontFamily: "'Inter', sans-serif" },
  phaseName: { fontSize: '18px', fontWeight: '700', letterSpacing: '2px' },
  phaseReps: { fontSize: '11px', color: '#aaa', fontFamily: "'Inter', sans-serif" },
  weekGrid: { display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '10px', marginBottom: '24px' },
  weekCard: { background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '12px', padding: '14px 8px', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '6px', cursor: 'pointer' },
  weekCardHypertrophy: { borderColor: 'rgba(59, 130, 246, 0.3)' },
  weekCardStrength: { borderColor: 'rgba(249, 115, 22, 0.3)' },
  weekCardRun: { borderColor: 'rgba(16, 185, 129, 0.3)' },
  weekCardComplete: { borderColor: 'rgba(34, 197, 94, 0.5)', background: 'rgba(34, 197, 94, 0.1)' },
  weekNumber: { fontSize: '12px', fontWeight: '600', letterSpacing: '1px', color: '#fff' },
  weekMiles: { fontSize: '11px', color: '#10b981', fontFamily: "'Inter', sans-serif" },
  weekProgressBar: { width: '100%', height: '4px', background: 'rgba(255,255,255,0.1)', borderRadius: '2px', overflow: 'hidden' },
  weekProgressFill: { height: '100%', borderRadius: '2px', transition: 'width 0.3s ease' },
  weekProgressText: { fontSize: '11px', color: '#888', fontFamily: "'Inter', sans-serif" },
  statsRow: { display: 'flex', gap: '12px', marginBottom: '16px' },
  statBox: { flex: 1, background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.08)', borderRadius: '12px', padding: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center' },
  statValue: { fontSize: '28px', fontWeight: '700', color: '#f97316', letterSpacing: '1px' },
  statValueRun: { fontSize: '28px', fontWeight: '700', color: '#10b981', letterSpacing: '1px' },
  statLabel: { fontSize: '11px', color: '#666', letterSpacing: '2px', textTransform: 'uppercase', fontFamily: "'Inter', sans-serif" },
  resetAllBtn: { width: '100%', padding: '12px', background: 'transparent', border: '1px solid rgba(239, 68, 68, 0.3)', borderRadius: '8px', color: '#ef4444', fontSize: '12px', fontFamily: "'Inter', sans-serif", cursor: 'pointer' },
  backButton: { background: 'transparent', border: 'none', color: '#888', fontSize: '14px', fontFamily: "'Inter', sans-serif", cursor: 'pointer', padding: '8px 0', marginBottom: '8px' },
  weekHeader: { textAlign: 'center', marginBottom: '24px' },
  weekTitle: { fontSize: '42px', fontWeight: '400', letterSpacing: '4px', margin: '0 0 12px 0' },
  phaseBadge: { display: 'inline-block', padding: '8px 20px', borderRadius: '20px', fontSize: '12px', fontWeight: '600', letterSpacing: '2px', textTransform: 'uppercase', fontFamily: "'Inter', sans-serif" },
  runBadge: { display: 'inline-block', padding: '8px 20px', borderRadius: '20px', fontSize: '12px', fontWeight: '600', letterSpacing: '2px', fontFamily: "'Inter', sans-serif", background: 'linear-gradient(135deg, #10b981, #059669)' },
  weekMeta: { fontSize: '13px', color: '#888', marginTop: '12px', fontFamily: "'Inter', sans-serif" },
  dayGrid: { display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px' },
  dayCard: { background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '16px', padding: '20px', display: 'flex', flexDirection: 'column', gap: '8px', cursor: 'pointer', textAlign: 'left' },
  dayCardComplete: { borderColor: 'rgba(34, 197, 94, 0.5)', background: 'rgba(34, 197, 94, 0.1)' },
  dayHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' },
  dayNumber: { fontSize: '12px', color: '#666', letterSpacing: '2px', textTransform: 'uppercase', fontFamily: "'Inter', sans-serif" },
  checkMark: { color: '#22c55e', fontSize: '18px', fontWeight: 'bold' },
  dayName: { fontSize: '20px', fontWeight: '600', letterSpacing: '1px', color: '#fff' },
  dayExercises: { fontSize: '12px', color: '#888', fontFamily: "'Inter', sans-serif" },
  dayProgressBar: { width: '100%', height: '4px', background: 'rgba(255,255,255,0.1)', borderRadius: '2px', overflow: 'hidden', marginTop: '8px' },
  dayProgressFill: { height: '100%', background: 'linear-gradient(90deg, #22c55e, #16a34a)', borderRadius: '2px', transition: 'width 0.3s ease' },
  dayProgressText: { fontSize: '11px', color: '#666', fontFamily: "'Inter', sans-serif" },
  runList: { display: 'flex', flexDirection: 'column', gap: '16px' },
  runCard: { background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.08)', borderRadius: '16px', padding: '20px' },
  runCardComplete: { borderColor: 'rgba(34, 197, 94, 0.5)', background: 'rgba(34, 197, 94, 0.1)' },
  runHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' },
  runDay: { display: 'block', fontSize: '18px', fontWeight: '600', color: '#fff', marginBottom: '4px', fontFamily: "'Inter', sans-serif" },
  runIntensity: { fontSize: '12px', color: '#10b981', fontFamily: "'Inter', sans-serif" },
  runDistance: { fontSize: '28px', fontWeight: '700', color: '#10b981', fontFamily: "'Bebas Neue', sans-serif", letterSpacing: '2px' },
  runInputRow: { display: 'flex', gap: '12px', alignItems: 'flex-end' },
  runInputGroup: { flex: 1 },
  runInputLabel: { display: 'block', fontSize: '11px', color: '#888', marginBottom: '6px', fontFamily: "'Inter', sans-serif", textTransform: 'uppercase', letterSpacing: '1px' },
  runInput: { width: '100%', background: 'rgba(255,255,255,0.08)', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '8px', padding: '12px', color: '#fff', fontSize: '16px', fontFamily: "'Inter', sans-serif", textAlign: 'center', outline: 'none' },
  runCompleteBtn: { padding: '12px 20px', background: 'rgba(255,255,255,0.08)', border: '1px solid rgba(255,255,255,0.2)', borderRadius: '8px', color: '#888', fontSize: '14px', fontFamily: "'Inter', sans-serif", cursor: 'pointer', fontWeight: '500' },
  runCompleteBtnActive: { background: '#22c55e', borderColor: '#22c55e', color: '#fff' },
  runPace: { marginTop: '12px', fontSize: '13px', color: '#888', fontFamily: "'Inter', sans-serif", textAlign: 'center' },
  workoutHeader: { marginBottom: '24px' },
  workoutTitleRow: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' },
  workoutTitle: { fontSize: '28px', fontWeight: '400', letterSpacing: '2px', margin: 0 },
  resetButton: { background: 'rgba(239, 68, 68, 0.2)', border: '1px solid rgba(239, 68, 68, 0.3)', color: '#ef4444', padding: '8px 16px', borderRadius: '8px', fontSize: '12px', fontFamily: "'Inter', sans-serif", cursor: 'pointer' },
  workoutMeta: { fontSize: '13px', color: '#888', marginTop: '8px', fontFamily: "'Inter', sans-serif" },
  workoutProgressBar: { width: '100%', height: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '4px', overflow: 'hidden', marginTop: '16px' },
  workoutProgressFill: { height: '100%', background: 'linear-gradient(90deg, #f97316, #facc15)', borderRadius: '4px', transition: 'width 0.3s ease' },
  workoutProgressFillRun: { height: '100%', background: 'linear-gradient(90deg, #10b981, #34d399)', borderRadius: '4px', transition: 'width 0.3s ease' },
  workoutProgressText: { fontSize: '13px', color: '#888', marginTop: '8px', fontFamily: "'Inter', sans-serif" },
  exerciseList: { display: 'flex', flexDirection: 'column', gap: '12px' },
  exerciseCard: { background: 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.08)', borderRadius: '12px', overflow: 'hidden' },
  exerciseHeader: { width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '16px', background: 'transparent', border: 'none', color: '#fff', cursor: 'pointer', textAlign: 'left' },
  exerciseInfo: { display: 'flex', flexDirection: 'column', gap: '4px' },
  exerciseName: { fontSize: '15px', fontWeight: '500', fontFamily: "'Inter', sans-serif" },
  exerciseSets: { fontSize: '12px', color: '#888', fontFamily: "'Inter', sans-serif" },
  exerciseToggle: { fontSize: '12px', color: '#666' },
  setsContainer: { padding: '0 16px 16px 16px', display: 'flex', flexDirection: 'column', gap: '8px' },
  setRow: { display: 'flex', alignItems: 'center', gap: '10px', padding: '12px', background: 'rgba(255,255,255,0.03)', borderRadius: '8px' },
  setRowComplete: { background: 'rgba(34, 197, 94, 0.15)', border: '1px solid rgba(34, 197, 94, 0.3)' },
  setNumber: { fontSize: '13px', color: '#888', width: '45px', fontFamily: "'Inter', sans-serif" },
  input: { flex: 1, background: 'rgba(255,255,255,0.08)', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '8px', padding: '12px 8px', color: '#fff', fontSize: '16px', fontFamily: "'Inter', sans-serif", textAlign: 'center', outline: 'none', minWidth: 0 },
  completeButton: { width: '44px', height: '44px', borderRadius: '50%', background: 'rgba(255,255,255,0.08)', border: '2px solid rgba(255,255,255,0.2)', color: '#666', fontSize: '20px', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0 },
  completeButtonActive: { background: '#22c55e', borderColor: '#22c55e', color: '#fff' },
};

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(FitnessTracker));
  </script>
</body>
</html>
